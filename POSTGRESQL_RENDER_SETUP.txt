â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  ğŸ—„ï¸  MIGRAÃ‡ÃƒO PARA POSTGRESQL - DADOS PERMANENTES            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ‰ PARABÃ‰NS! Seu cÃ³digo foi atualizado para usar PostgreSQL!

âœ… Dados NUNCA mais serÃ£o perdidos em deploys
âœ… 100% GRATUITO (512 MB)
âœ… PostgreSQL profissional no Render

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“‹ PASSO A PASSO COMPLETO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PASSO 1: CRIAR BANCO DE DADOS POSTGRESQL NO RENDER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Acesse: https://dashboard.render.com

2. No topo da pÃ¡gina, clique em: "New +" (botÃ£o azul)

3. No menu dropdown, selecione: "PostgreSQL"

4. Preencha o formulÃ¡rio:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Name: iep-recrutamento-db                       â”‚
   â”‚                                                 â”‚
   â”‚ Database: (deixe preenchido automaticamente)    â”‚
   â”‚                                                 â”‚
   â”‚ User: (deixe preenchido automaticamente)        â”‚
   â”‚                                                 â”‚
   â”‚ Region: Oregon (US West) ou SÃ£o Paulo (SA East)â”‚
   â”‚                                                 â”‚
   â”‚ PostgreSQL Version: 15 ou 16                    â”‚
   â”‚                                                 â”‚
   â”‚ Datadog API Key: (deixe em branco)             â”‚
   â”‚                                                 â”‚
   â”‚ Instance Type: FREE (512 MB, 1 vCPU)           â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

5. Clique no botÃ£o: "Create Database"

6. AGUARDE 2-3 minutos para o banco ser criado

7. Quando terminar, vocÃª verÃ¡:
   âœ… Status: Available
   ğŸŸ¢ (bola verde)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PASSO 2: COPIAR A URL DE CONEXÃƒO (DATABASE_URL)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Ainda na pÃ¡gina do banco de dados criado

2. Role para baixo atÃ© ver a seÃ§Ã£o: "Connections"

3. VocÃª verÃ¡ vÃ¡rias URLs. Procure por:
   
   ğŸ“ Internal Database URL
   
   Exemplo:
   postgresql://user:password@dpg-xxx.oregon-postgres.render.com/dbname

4. Clique no Ã­cone de COPIAR ao lado da URL

5. GUARDE essa URL! VocÃª vai precisar no prÃ³ximo passo.

   âš ï¸  IMPORTANTE: Use "Internal Database URL", NÃƒO a "External"!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PASSO 3: ADICIONAR DATABASE_URL NO SEU WEB SERVICE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Volte para: https://dashboard.render.com

2. Clique no seu serviÃ§o WEB: iep-recrutamento-web

3. No menu lateral, clique em: "Environment"

4. Clique em: "Add Environment Variable"

5. Preencha:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Key:   DATABASE_URL                             â”‚
   â”‚ Value: (COLE A URL QUE VOCÃŠ COPIOU NO PASSO 2) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   Exemplo de valor:
   postgresql://user:abc123@dpg-xxx.oregon-postgres.render.com/dbname

6. Clique em: "Save Changes"

   âš ï¸  O Render vai REDEPLOY automÃ¡tico! Aguarde 3-5 minutos.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PASSO 4: VERIFICAR SE FUNCIONOU
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. No seu serviÃ§o web, clique em: "Logs"

2. Aguarde o deploy terminar

3. Procure por estas linhas:

   âœ… SUCESSO - Deve aparecer:
   
   ğŸ” Modo: PostgreSQL (ProduÃ§Ã£o)
   ğŸ“¦ Banco de dados: PostgreSQL (Render)
   âœ… Conectado ao banco de dados PostgreSQL
   âœ… Tabela "pacientes" pronta
   âœ… Tabela "documentos" pronta
   âœ… Tabela "configuracoes" pronta
   ğŸš€ Servidor IEP Recrutamento rodando!
   âœ… PostgreSQL conectado (dados persistentes)

   âŒ ERRO - Se aparecer:
   
   Error: getaddrinfo ENOTFOUND
   Connection refused
   
   â†’ Verifique se copiou a URL correta (Internal, nÃ£o External)

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PASSO 5: TESTAR O SISTEMA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. Acesse seu site em produÃ§Ã£o:
   https://iep-recrutamento-web.onrender.com

2. Cadastre um paciente de TESTE

3. FaÃ§a um REDEPLOY manual:
   - Settings â†’ Manual Deploy â†’ Deploy latest commit

4. Aguarde o deploy terminar

5. Acesse o site novamente

6. O paciente de teste AINDA ESTÃ LÃ? 
   
   âœ… SIM â†’ PostgreSQL funcionando! Dados permanentes!
   âŒ NÃƒO â†’ Algo deu errado, me avise!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ¯ RESUMO DO QUE FOI FEITO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… Instalado driver PostgreSQL (pg)
âœ… Reescrito database.js com suporte duplo:
   - PostgreSQL em produÃ§Ã£o (quando DATABASE_URL existe)
   - SQLite local (desenvolvimento)
âœ… Reescrito server.js com async/await
âœ… Converter queries automaticamente (? â†’ $1, $2...)
âœ… Tabelas criadas automaticamente
âœ… CompatÃ­vel com cÃ³digo existente

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ”„ COMO FUNCIONA AGORA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

PRODUÃ‡ÃƒO (Render):
  âœ… Detecta DATABASE_URL
  âœ… Usa PostgreSQL
  âœ… Dados permanentes (512 MB)
  âœ… Nunca perde dados em deploy

DESENVOLVIMENTO (Local):
  âœ… NÃ£o tem DATABASE_URL
  âœ… Usa SQLite (iep_recrutamento.db)
  âœ… Arquivos locais
  âœ… Testa rÃ¡pido

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ’¾ BACKUP DO BANCO DE DADOS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Para fazer backup periÃ³dico:

1. No Render, vÃ¡ no seu banco: iep-recrutamento-db

2. Clique em "Backups" (menu lateral)

3. Backups automÃ¡ticos:
   - FREE: 7 dias de retenÃ§Ã£o
   - Backup diÃ¡rio automÃ¡tico

4. Restaurar backup:
   - Backups â†’ Clique no backup desejado â†’ Restore

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ“Š LIMITES DO PLANO GRATUITO
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… 512 MB de armazenamento
âœ… 1 GB de transferÃªncia/mÃªs
âœ… Backups de 7 dias
âœ… 90 dias de atividade (depois expira se nÃ£o usar)
âœ… Unlimited queries

Para uso mÃ©dico com ~100-200 pacientes: MAIS DO QUE SUFICIENTE!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â“ DÃšVIDAS COMUNS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

P: Os dados antigos do SQLite foram perdidos?
R: Sim, pois era temporÃ¡rio. PostgreSQL comeÃ§a "zerado".
   Todos os dados novos agora sÃ£o permanentes!

P: Posso continuar testando localmente?
R: SIM! Localmente usa SQLite, produÃ§Ã£o usa PostgreSQL.
   Funcionam independentemente.

P: E se eu fizer deploy de novo cÃ³digo?
R: Dados NÃƒO sÃ£o perdidos! PostgreSQL Ã© separado do web service.

P: Quanto tempo atÃ© expirar o banco gratuito?
R: 90 dias de inatividade. Se usar toda semana, nunca expira.

P: Posso ver os dados no banco?
R: Sim! No Render, vÃ¡ no banco â†’ Connect
   Use ferramentas como pgAdmin, DBeaver, etc.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… CHECKLIST FINAL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

- [ ] Criar PostgreSQL no Render
- [ ] Aguardar status "Available"
- [ ] Copiar Internal Database URL
- [ ] Adicionar DATABASE_URL no web service
- [ ] Aguardar redeploy (3-5 min)
- [ ] Verificar logs: "PostgreSQL conectado"
- [ ] Testar cadastro de paciente
- [ ] Fazer redeploy manual
- [ ] Verificar se dados permaneceram
- [ ] DADOS PERMANENTES! ğŸ‰

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ†˜ SE PRECISAR DE AJUDA
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Se encontrar erro, me envie:
1. Print do erro nos logs
2. DATABASE_URL estÃ¡ configurada?
3. Qual o status do banco PostgreSQL?

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸš€ PRONTO PARA COMEÃ‡AR!

Siga os 5 passos acima e seus dados estarÃ£o permanentemente
salvos, mesmo fazendo deploys todo dia!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

